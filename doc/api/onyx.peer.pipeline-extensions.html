<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>onyx.peer.pipeline-extensions documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Onyx 0.3.3-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>onyx</span></div></div></li><li class="depth-2 branch"><a href="onyx.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coordinator</span></div></div></li><li class="depth-3"><a href="onyx.coordinator.planning.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>planning</span></div></a></li><li class="depth-2 branch"><a href="onyx.extensions.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>extensions</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>peer</span></div></div></li><li class="depth-3 branch"><a href="onyx.peer.operation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>operation</span></div></a></li><li class="depth-3 branch current"><a href="onyx.peer.pipeline-extensions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pipeline-extensions</span></div></a></li><li class="depth-3"><a href="onyx.peer.task-lifecycle-extensions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>task-lifecycle-extensions</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>plugin</span></div></div></li><li class="depth-3"><a href="onyx.plugin.hornetq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hornetq</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>queue</span></div></div></li><li class="depth-3"><a href="onyx.queue.hornetq-utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hornetq-utils</span></div></a></li><li class="depth-2"><a href="onyx.system.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>system</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="onyx.peer.pipeline-extensions.html#var-ack-batch"><div class="inner"><span>ack-batch</span></div></a></li><li class="depth-1"><a href="onyx.peer.pipeline-extensions.html#var-apply-fn"><div class="inner"><span>apply-fn</span></div></a></li><li class="depth-1"><a href="onyx.peer.pipeline-extensions.html#var-compress-batch"><div class="inner"><span>compress-batch</span></div></a></li><li class="depth-1"><a href="onyx.peer.pipeline-extensions.html#var-decompress-batch"><div class="inner"><span>decompress-batch</span></div></a></li><li class="depth-1"><a href="onyx.peer.pipeline-extensions.html#var-read-batch"><div class="inner"><span>read-batch</span></div></a></li><li class="depth-1"><a href="onyx.peer.pipeline-extensions.html#var-requeue-sentinel"><div class="inner"><span>requeue-sentinel</span></div></a></li><li class="depth-1"><a href="onyx.peer.pipeline-extensions.html#var-seal-resource"><div class="inner"><span>seal-resource</span></div></a></li><li class="depth-1"><a href="onyx.peer.pipeline-extensions.html#var-strip-sentinel"><div class="inner"><span>strip-sentinel</span></div></a></li><li class="depth-1"><a href="onyx.peer.pipeline-extensions.html#var-type-and-medium-dispatch"><div class="inner"><span>type-and-medium-dispatch</span></div></a></li><li class="depth-1"><a href="onyx.peer.pipeline-extensions.html#var-write-batch"><div class="inner"><span>write-batch</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">onyx.peer.pipeline-extensions</h2><div class="doc"><pre class="plaintext">Public API extensions for the virtual peer data pipeline.
</pre></div><div class="public anchor" id="var-ack-batch"><h3>ack-batch</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Acknowledges the reading of the ingested batch. Must return a map with
key :onyx.core/acked and value integer representing the number of segments ack&apos;ed.</pre></div></div><div class="public anchor" id="var-apply-fn"><h3>apply-fn</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Applies a function to the decompressed segments. Must return a map with
key :onyx.core/results and value seq representing the application of the function
to the segments.</pre></div></div><div class="public anchor" id="var-compress-batch"><h3>compress-batch</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Compresses the segments that result from function application. Must return
key :onyx.core/compressed and value seq representing the compression of the segments.</pre></div></div><div class="public anchor" id="var-decompress-batch"><h3>decompress-batch</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Decompresses the ingested segments. Must return a map
with key :onyx.core/decompressed and value seq representing the
decompressed segments.</pre></div></div><div class="public anchor" id="var-read-batch"><h3>read-batch</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Reads :onyx/batch-size segments off the incoming data source.
Must return a map with key :onyx.core/batch and value seq representing
the ingested segments.</pre></div></div><div class="public anchor" id="var-requeue-sentinel"><h3>requeue-sentinel</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Puts the sentinel value back onto the tail of the incoming data source.
Only required in batch mode on destructive data sources such as queues.
Must return a map with key :requeued? and value boolean.</pre></div></div><div class="public anchor" id="var-seal-resource"><h3>seal-resource</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Closes any resources that remain open during a task being executed.
Called once at the end of a task for each virtual peer after the incoming
queue has been exhausted. Only called once globally for a single task.</pre></div></div><div class="public anchor" id="var-strip-sentinel"><h3>strip-sentinel</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Checks if the sentinel value is present in the ingested batch
and removes it from downstream propagation when found.

Only required in batch mode on destructive data sources such as queues.
Must return a map with key :onyx.core/requeue? and boolean true if the sentinel
should be requeued. Map must also contain :onyx.core/tail-batch? if this is the last
batch to be ingested.

It is sometimes possible to see the sentinel value without
seeing the last batch, due to circumstances such as clustered queues with failures.

Further, onyx.core/decompressed should be stripped of
the sentinel value to avoid propagating it to downstream tasks.</pre></div></div><div class="public anchor" id="var-type-and-medium-dispatch"><h3>type-and-medium-dispatch</h3><div class="usage"><code>(type-and-medium-dispatch {:keys [onyx.core/task-map]})</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-write-batch"><h3>write-batch</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Writes segments to the outgoing data source. Must return a map.
</pre></div></div></div></body></html>